<div class="pageBox">
  <div class="header">
    <h1>{{ "customerDetailPage.customerDetail" | translate }}</h1>
  </div>
  <div class="breadCrumb">
    <h5>
      <a href="">{{ "sideNavMenu.customerManagement" | translate }}</a>
    </h5>
    <mat-icon
      aria-hidden="false"
      aria-label="Example home icon"
      fontIcon="arrow_forward_ios"
    ></mat-icon>
    <h5>
      <a>{{ "customerDetailPage.customerDetail" | translate }}</a>
    </h5>
  </div>
  <form [formGroup]="customerDetailForm">
    <div class="row">
      <div class="col d-flex">
        <h5 style="width: 12em">
          {{ "customerDetailPage.lastOrderStatus" | translate }}
        </h5>
        <p style="color: red; text-decoration: underline">
          THIS SUBSCRIBER PLACED HIS LAST ORDER 14 DAYS AGO!
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col d-flex">
        <h5 style="width: 12em">
          {{ "customerDetailPage.lastOrderDate" | translate }}
        </h5>
        <p style="color: green; text-decoration: underline">
          01.10.2023 - Delivered
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.customerName" | translate
          }}</mat-label>
          <input
            matInput
            placeholder="ABC"
            type="text"
            formControlName="customerName"
          />
          <!-- <mat-error *ngIf="customerListForm.hasError('required','customerId')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.preferenceReason" | translate
          }}</mat-label>
          <mat-select formControlName="preferenceReason">
            <mat-option value="serviceQuality">{{
              "createCustomerPage.serviceQuality" | translate
            }}</mat-option>
            <mat-option value="flavorAndTaste">{{
              "createCustomerPage.flavorAndTaste" | translate
            }}</mat-option>
            <mat-option value="price">{{
              "createCustomerPage.price" | translate
            }}</mat-option>
            <mat-option value="cleanBottle">{{
              "createCustomerPage.cleanBottle" | translate
            }}</mat-option>
            <mat-option value="brand">{{
              "createCustomerPage.brand" | translate
            }}</mat-option>
          </mat-select>
          <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.bottleDeposit" | translate
          }}</mat-label>
          <input
            matInput
            placeholder="0"
            type="number"
            formControlName="bottleDeposit"
          />
          <!-- <mat-error *ngIf="customerListForm.hasError('required','address')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.emptyBottleQuantity" | translate
          }}</mat-label>
          <input
            matInput
            placeholder="0"
            type="number"
            formControlName="emptyBottleQuantity"
          />
          <!-- <mat-error *ngIf="customerListForm.hasError('required','address')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100" color="warn" appearance="outline">
          <mat-label>{{
            "customerDetailPage.registrationType" | translate
          }}</mat-label>
          <mat-select formControlName="registrationType">
            <mat-option value="option1">Option 1</mat-option>
            <mat-option value="option2">Option 2</mat-option>
          </mat-select>
          <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100" color="warn" appearance="outline">
          <mat-label>{{ "customerDetailPage.branch" | translate }}</mat-label>
          <mat-select formControlName="branch">
            <mat-option value="option1">Option 1</mat-option>
            <mat-option value="option2">Option 2</mat-option>
          </mat-select>
          <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100" color="warn" appearance="outline">
          <mat-label>{{
            "customerDetailPage.customerType" | translate
          }}</mat-label>
          <mat-select formControlName="customerType">
            <mat-option value="option1">Option 1</mat-option>
            <mat-option value="option2">Option 2</mat-option>
          </mat-select>
          <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{ "createCustomerPage.mail" | translate }}</mat-label>
          <input
            matInput
            placeholder="abc@def.com"
            type="email"
            formControlName="mail"
          />
          <!-- <mat-error *ngIf="customerListForm.hasError('required','customerName')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.customerNote" | translate
          }}</mat-label>
          <textarea
            matInput
            placeholder="Special Customer Note"
            type="text"
            formControlName="customerNote"
          ></textarea>
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.generalOrderNote" | translate
          }}</mat-label>
          <textarea
            matInput
            placeholder="Note attached to each order"
            type="text"
            formControlName="generalOrderNote"
          ></textarea>
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "createCustomerPage.recommendedByCustomer" | translate
          }}</mat-label>
          <input
            matInput
            placeholder="ABC"
            type="text"
            formControlName="recommendedByCustomer"
          />
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        <mat-form-field class="w-100" color="warn" appearance="outline">
          <mat-label>{{
            "customerDetailPage.deliveryPersonName" | translate
          }}</mat-label>
          <mat-select formControlName="deliveryPersonName">
            <mat-option value="option1">Option 1</mat-option>
            <mat-option value="option2">Option 2</mat-option>
          </mat-select>
          <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
        <mat-form-field class="w-100 mb-1" color="warn" appearance="outline">
          <mat-label>{{
            "customerDetailPage.subscriberNumber" | translate
          }}</mat-label>
          <input
            matInput
            placeholder="111"
            type="text"
            formControlName="subscriberNumber"
          />
          <!-- <mat-error *ngIf="customerListForm.hasError('required','customerName')">{{'validation.required' |
                            translate}}</mat-error> -->
        </mat-form-field>
      </div>
    </div>
  </form>
  <div class="row mt-3 mb-4">
    <div class="col tabs">
      <button [class.active]="isPhoneDiv" (click)="phoneDivFn()">
        {{ "btn.phone" | translate }}
      </button>
      <button
        [class.active]="isCommunicationPermissionsDiv"
        (click)="communicationPermissionsDivFn()"
      >
        {{ "customerDetailPage.communicationPermissions" | translate }}
      </button>
      <button
        [class.active]="isBranchWorkingTimesDiv"
        (click)="branchWorkingTimesDivFn()"
      >
        {{ "customerDetailPage.branchWorkingTimes" | translate }}
      </button>
      <button [class.active]="isBranchStocksDiv" (click)="branchStocksDivFn()">
        {{ "customerDetailPage.branchStocks" | translate }}
      </button>
    </div>
  </div>
  <div class="row">
    <div *ngIf="isPhoneDiv" class="phoneDiv">
      <form [formGroup]="phoneForm">
        <div class="row tabForm">
          <div class="col">
            <div style="display: flex">
              <mat-form-field
                class="w-100 mb-1"
                color="warn"
                appearance="outline"
              >
                <mat-label>{{
                  "createCustomerPage.phoneNumber" | translate
                }}</mat-label>
                <input
                  matInput
                  placeholder="32234234"
                  type="text"
                  formControlName="phoneNumber"
                />
                <!-- <mat-error *ngIf="customerListForm.hasError('required','customerId')">{{'validation.required' |
                                            translate}}</mat-error> -->
              </mat-form-field>
              <button
                (click)="addPhoneNumber()"
                class="AddPhoneBtn"
                mat-raised-button
                color="warn"
              >
                {{ "btn.add" | translate }}
              </button>
            </div>
            <table
              *ngIf="phoneNumberArray.length > 0"
              mat-table
              [dataSource]="dataSource1"
              class="mat-elevation-z8 mt-3 mb-3"
            >
              <ng-container matColumnDef="phoneNumber">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "createCustomerPage.phoneNumber" | translate }}
                </th>
                <td mat-cell *matCellDef="let element">{{ element }}</td>
              </ng-container>
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "createCustomerPage.actions" | translate }}
                </th>
                <td mat-cell *matCellDef="let element">
                  <button
                    (click)="clearPhoneNumber(element)"
                    mat-raised-button
                    color="warn"
                  >
                    <mat-icon>remove</mat-icon>{{ "btn.remove" | translate }}
                  </button>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns1"></tr>
            </table>
          </div>
        </div>
      </form>
    </div>
    <div
      *ngIf="isCommunicationPermissionsDiv"
      class="communicationPermissionsDiv"
    >
      <form [formGroup]="communicationPermissionsForm">
        <div class="row tabForm">
          <div class="col">
            <div style="display: flex">
              <mat-form-field class="w-100" color="warn" appearance="outline">
                <mat-label>{{
                  "customerDetailPage.telephoneNumber" | translate
                }}</mat-label>
                <mat-select formControlName="telephoneNumber">
                  <mat-option value="1234">1234</mat-option>
                  <mat-option value="5678">5678</mat-option>
                </mat-select>
                <!-- <mat-error *ngIf="customerListForm.hasError('required','createdBy')">{{'validation.required' |
                                        translate}}</mat-error> -->
              </mat-form-field>
              <button
                (click)="addTelephoneNumber()"
                class="AddPhoneBtn"
                mat-raised-button
                color="warn"
              >
                {{ "btn.add" | translate }}
              </button>
            </div>
          </div>
          <div class="col">
            <h4>
              {{ "customerDetailPage.communicationPermissions" | translate }}
            </h4>
            <p>
              <mat-checkbox
                formControlName="personalDataProtectionLaw"
                color="warn"
                >{{
                  "customerDetailPage.personalDataProtectionLaw" | translate
                }}</mat-checkbox
              >
            </p>
            <p>
              <mat-checkbox formControlName="phone" color="warn">{{
                "customerDetailPage.phone" | translate
              }}</mat-checkbox>
            </p>
            <p>
              <mat-checkbox formControlName="sms" color="warn">{{
                "customerDetailPage.sms" | translate
              }}</mat-checkbox>
            </p>
            <p>
              <mat-checkbox formControlName="email" color="warn">{{
                "customerDetailPage.email" | translate
              }}</mat-checkbox>
            </p>
          </div>
        </div>
        <div class="row tabForm">
          <div class="col">
            <table
              *ngIf="telephoneNumberArray.length > 0"
              mat-table
              [dataSource]="dataSource2"
              class="mat-elevation-z8 mt-3 mb-3"
            >
              <ng-container matColumnDef="telephoneNumber">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "createCustomerPage.phoneNumber" | translate }}
                </th>
                <td mat-cell *matCellDef="let row">
                  {{ row.telephoneNumber }}
                </td>
              </ng-container>
              <ng-container matColumnDef="personalDataProtectionLaw">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "customerDetailPage.pdpl" | translate }}
                </th>
                <td mat-cell *matCellDef="let row">
                  <p>
                    <mat-checkbox
                      color="warn"
                      [checked]="row.personalDataProtectionLaw"
                    ></mat-checkbox>
                  </p>
                </td>
              </ng-container>
              <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "customerDetailPage.phone" | translate }}
                </th>
                <td mat-cell *matCellDef="let row">
                  <p>
                    <mat-checkbox
                      color="warn"
                      [checked]="row.phone"
                    ></mat-checkbox>
                  </p>
                </td>
              </ng-container>
              <ng-container matColumnDef="sms">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "customerDetailPage.sms" | translate }}
                </th>
                <td mat-cell *matCellDef="let row">
                  <p>
                    <mat-checkbox
                      color="warn"
                      [checked]="row.sms"
                    ></mat-checkbox>
                  </p>
                </td>
              </ng-container>
              <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "customerDetailPage.email" | translate }}
                </th>
                <td mat-cell *matCellDef="let row">   <p>
                  <mat-checkbox
                    color="warn"
                    [checked]="row.email"
                  ></mat-checkbox>
                </p></td>
              </ng-container>
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>
                  {{ "createCustomerPage.actions" | translate }}
                </th>
                <td mat-cell *matCellDef="let row, let i= index">
                  <button
                    (click)="clearTelephoneNumber(i)"
                    mat-raised-button
                    color="warn"
                  >
                    <mat-icon>remove</mat-icon>{{ "btn.remove" | translate }}
                  </button>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns2"></tr>
            </table>
          </div>
        </div>
      </form>
    </div>
    <div *ngIf="isBranchWorkingTimesDiv" class="branchWorkingTimesDiv">
      <div class="row tabForm">
        <div class="col">
          <table
            mat-table
            [dataSource]="dataSource3"
            class="mat-elevation-z8 mt-3 mb-3"
          >
            <ng-container matColumnDef="opening">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.opening" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.opening }}</td>
            </ng-container>
            <ng-container matColumnDef="closing">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.closing" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.closing }}</td>
            </ng-container>
            <ng-container matColumnDef="workOnSunday">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.workOnSunday" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.workOnSunday }}</td>
            </ng-container>
            <ng-container matColumnDef="sundayOpening">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.sundayOpening" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.sundayOpening }}</td>
            </ng-container>
            <ng-container matColumnDef="sundayClosing">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.sundayClosing" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.sundayClosing }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns3"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns3"></tr>
          </table>
        </div>
      </div>
    </div>
    <div *ngIf="isBranchStocksDiv" class="branchStocksDiv">
      <div class="row tabForm">
        <div class="col">
          <table
            mat-table
            [dataSource]="dataSource4"
            class="mat-elevation-z8 mt-3 mb-3"
          >
            <ng-container matColumnDef="product">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.product" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.product }}</td>
            </ng-container>
            <ng-container matColumnDef="piece">
              <th mat-header-cell *matHeaderCellDef>
                {{ "customerDetailPage.piece" | translate }}
              </th>
              <td mat-cell *matCellDef="let row">{{ row.piece }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns4"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns4"></tr>
          </table>
        </div>
      </div>
    </div>
    <div class="searchBtn">
      <button
        (click)="goBackFn()"
        style="margin-right: 1.5em"
        mat-raised-button
        color="warn"
      >
        <mat-icon>reply</mat-icon>{{ "btn.back" | translate }}
      </button>
      <button
        (click)="customerDetailSubmitFn()"
        style="margin-right: 1.5em"
        mat-raised-button
        color="warn"
      >
        <mat-icon>save</mat-icon>{{ "btn.save" | translate }}
      </button>
      <button mat-raised-button color="warn" style="margin-right: 1.5em">
        <mat-icon>collections_bookmark</mat-icon
        >{{ "btn.saveAndCreateOrder" | translate }}
      </button>
      <button mat-raised-button color="warn">
        <mat-icon>collections_bookmark</mat-icon
        >{{ "btn.createComplaint" | translate }}
      </button>
    </div>
  </div>
</div>
